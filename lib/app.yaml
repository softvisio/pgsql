dependencies:
  - "@softvisio/app"

cli:
  commands:
    run:
      options:
        cluster:
          description: "PostgreSQL cluster name. Example: main."
          schema: { type: string }
    postgresql:
      title: PostgreSQL management
      commands:
        upgrade:
          title: Upgrade PostgreSQL cluster
          arguments:
            cluster-version:
              description: Old cluster version to upgrage from.
              required: true
              schema: { type: integer }
            cluster-name:
              description: old cluster name to upgrage from
              schema: { type: string }

services:
  primary:
    components:
      postgresql:
        mode: primary
      dbh:
        uri: postgresql://
      storage: true

  standby-sync:
    components:
      postgresql:
        mode: standby-sync

  standby-async:
    components:
      postgresql:
        mode: standby-async

defaultService: primary

components:
  healthcheck:
    enabled: false

  storage:
    buckets:
      /postgresql:
        type: local

config: ~
